<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yarn Database</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="flashlight">
  <header>
    <h1 class="h1">Yarn Database</h1>
    <button onclick="location.href='index.html'" class="button">Back to Main Page</button>
  </header>
  <main>
    <section>
      <h2 class="h2">Add Yarn to Your Collection</h2>
      <form id="yarn-form">
        <label for="yarn-name">Yarn Name:</label>
        <input type="text" id="yarn-name" name="yarn-name" required>
        <label for="yarn-color">Color:</label>
        <input type="text" id="yarn-color" name="yarn-color" required>
        <label for="yarn-quantity">Quantity:</label>
        <input type="number" id="yarn-quantity" name="yarn-quantity" required>
        <button type="submit" class="button">Add Yarn</button>
      </form>
    </section>
    <section>
      <h2 class="h2">Your Yarn Collection</h2>
      <div>
        <label for="filter-name">Filter by Name:</label>
        <input type="text" id="filter-name" placeholder="Filter by name">
        <label for="filter-color">Filter by Color:</label>
        <input type="text" id="filter-color" placeholder="Filter by color">
        <label for="filter-quantity">Filter by Quantity:</label>
        <input type="number" id="filter-quantity" placeholder="Filter by quantity">
        <label for="search-yarn">Search Yarn:</label>
        <input type="text" id="search-yarn" placeholder="Search yarn">
      </div>
      <table id="yarnTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Color</th>
            <th>Quantity</th>
          </tr>
        </thead>
        <tbody>
          <!-- Yarn data will be inserted here -->
        </tbody>
      </table>
    </section>
  </main>
  <footer>
    <p>&copy; 2024 Yarnivores</p>
  </footer>
  <script>
    // Fetch data from the server
    async function fetchYarnData() {
      try {
        const response = await fetch('/fetch-yarn-data');
        const data = await response.json();
        populateTable(data);
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }

    // Populate the table with data
    function populateTable(rows) {
      const tableBody = document.querySelector('#yarnTable tbody');
      rows.slice(1).forEach(row => {
        const tableRow = document.createElement('tr');
        row.forEach(cell => {
          const tableCell = document.createElement('td');
          tableCell.textContent = cell || 'N/A'; // Handle empty cells
          tableRow.appendChild(tableCell);
        });
        tableBody.appendChild(tableRow);
      });
    }

    // Fetch and display data on load
    fetchYarnData();
  </script>
</body>
</html>